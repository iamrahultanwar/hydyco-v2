(this["webpackJsonp@hydyco/admin-client"]=this["webpackJsonp@hydyco/admin-client"]||[]).push([[0],{286:function(e){e.exports=JSON.parse('{"name":"@hydyco/admin-client","version":"0.0.1","private":true,"dependencies":{"@ant-design/dark-theme":"^2.0.2","@buffetjs/icons":"^3.3.8","@ckeditor/ckeditor5-build-classic":"^29.2.0","@ckeditor/ckeditor5-react":"^3.0.2","@ckeditor/ckeditor5-upload":"^29.2.0","@testing-library/jest-dom":"^5.11.4","@testing-library/react":"^11.1.0","@testing-library/user-event":"^12.1.10","@types/axios":"^0.14.0","@types/jest":"^26.0.15","@types/node":"^12.20.15","@types/react":"^17.0.0","@types/react-dom":"^17.0.0","@types/react-router-dom":"^5.1.7","@types/uuid":"^8.3.0","@use-it/event-listener":"^0.1.6","antd":"^4.16.1","axios":"^0.21.1","html-react-parser":"^1.3.0","jsoneditor":"^9.5.2","jsoneditor-react":"^3.1.1","pascal-case":"^3.1.2","prettysize":"^2.0.0","query-string":"^7.0.1","react":"^17.0.2","react-css-theme-switcher":"^0.3.0","react-dom":"^17.0.2","react-error-boundary":"^3.1.3","react-flow-renderer":"^9.6.0","react-full-screen":"^1.1.0","react-highlight-words":"^0.17.0","react-json-editor-ajrm":"^2.5.13","react-json-view":"^1.21.3","react-redux":"^7.2.4","react-router-dom":"^5.2.0","react-scripts":"4.0.3","react-simple-code-editor":"^0.11.0","react-syntax-highlighter":"^15.4.4","redux":"^4.1.0","redux-devtools-extension":"^2.13.9","redux-thunk":"^2.3.0","typescript":"^4.1.2","use-mobile-detect-hook":"^1.0.4","use-react-router-breadcrumbs":"^2.0.2","uuid":"^8.3.2","web-vitals":"^1.0.1"},"scripts":{"start":"PORT=3005 react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","theme":"lessc --silent --js ./src/style.less ./public/style.css"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/react-redux":"^7.1.16","@types/redux":"^3.6.0","@types/redux-thunk":"^2.1.0","less":"^4.1.1","less-plugin-npm-import":"^2.1.0"},"proxy":"http://localhost:8081"}')},312:function(e,t,n){},522:function(e,t,n){"use strict";n.r(t);var a,c=n(0),r=n.n(c),i=n(37),s=n.n(i),l=n(168),o=n(27),u=n(281),j=n(282),d=(n(312),n(56)),b=n(28),h=n(526),O=n(552),f=n(50),x=n(293),p=n(21),m=n.n(p),g=n(32),v="INIT_COLLECTION",y="ADD_COLLECTION",w="REMOVE_COLLECTION",C="SET_COLLECTION",k="UPDATE_COLLECTION",S=n(296),T=n(80),F=n.n(T);function z(e){return F.a.post("/admin/model/create/"+e.name,e)}function I(e){var t=e.name;return F.a.delete("/admin/model/delete/"+t)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return F.a.post("/admin/model/crud/"+t,e)}function q(e,t,n){return F.a.post("/admin/send-mail",{emailCode:e,to:t,from:n})}function E(e){return A({type:C,collection:e})}function L(e){var t={type:k,collection:e};return function(){var n=Object(g.a)(m.a.mark((function n(a){var c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c="updatable",S.b.loading({content:"Saving...",key:c}),n.next=4,z(e);case 4:S.b.success({content:"Saved!",key:c,duration:2}),a(t);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}F.a.interceptors.request.use((function(e){return localStorage.getItem("token")&&(e.headers.authorization=localStorage.getItem("token")),e}),(function(e){return Promise.reject(e)})),F.a.interceptors.response.use((function(e){return 401===e.status&&(S.b.error("Not authorized"),localStorage.clear(),window.location.replace("/admin-ui/login")),e}),(function(e){return 401===e.response.status?(S.b.error("Not authorized"),localStorage.clear(),window.location.replace("/admin-ui/login")):e.response&&e.response.data?Promise.reject(e.response.data):Promise.reject(e.message)})),function(e){e.read="read",e.list="list",e.create="create",e.update="update",e.delete="delete",e.deleteAll="deleteAll",e.ref="ref"}(a||(a={}));var A=function(e){return function(t){return t(e)}},R=n(542),D=n(1);var V=function(){var e=Object(b.h)(),t={"":"Schema Flow",collections:"Schema",data:"Data Flow"}[e.pathname.split("/")[1]],n={"":"Visualize you database",collections:"Manage your mongoose schema",data:"Manage your data"}[e.pathname.split("/")[1]];return"Data Flow"===t?null:Object(D.jsx)(D.Fragment,{children:t&&Object(D.jsx)(R.a,{ghost:!1,title:t,subTitle:n})})},M=n(13),B=n(88),_=n(527),P=n(549),G=n(553),U=n(554),$=n(555),H=n(199),J=n(556),K=n(557),Y=n(558),W=n(559),Z=n(560),Q=n(561),X=n(562),ee=n(563),te=n(564),ne=h.a.Sider;var ae,ce,re=function(){var e=Object(b.h)(),t=Object(c.useState)(!0),n=Object(M.a)(t,2),a=n[0],r=n[1],i=e.pathname.split("/")[1],s=[{key:"",to:"/",name:"Schema Flow",icon:Object(D.jsx)(G.a,{})},{key:"collections",to:"/collections",name:"Collections",icon:Object(D.jsx)(U.a,{})},{key:"data",to:"/data",name:"Data Flow",icon:Object(D.jsx)($.a,{})}],l=[{key:"files",to:"/files",name:"Files",icon:Object(D.jsx)(H.a,{})},{key:"auth",to:"/auth",name:"Auth",icon:Object(D.jsx)(J.a,{})},{key:"emails",to:"/emails",name:"Email",icon:Object(D.jsx)(K.a,{})}];return Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(ne,{collapsible:!0,width:200,collapsedWidth:50,collapsed:a,theme:"dark",onCollapse:function(e,t){r(e)},style:{height:"100vh",overflow:"auto"},children:[Object(D.jsxs)(B.a,{style:{marginTop:10},mode:"inline",defaultSelectedKeys:[i],theme:"dark",children:[Object(D.jsx)(_.a,{orientation:"left",style:{color:"white"},children:a?Object(D.jsx)(Y.a,{color:"white"}):Object(D.jsxs)(P.b,{children:[Object(D.jsx)(W.a,{})," Core"]})}),s.map((function(e){return Object(D.jsx)(B.a.Item,{icon:e.icon,children:Object(D.jsx)(d.b,{to:e.to,children:e.name})},e.key)})),Object(D.jsx)(_.a,{orientation:"left",style:{color:"white"},children:a?Object(D.jsx)(Z.a,{}):Object(D.jsxs)(P.b,{children:[" ",Object(D.jsx)(Q.a,{})," Plugins"," "]})}),l.map((function(e){return Object(D.jsx)(B.a.Item,{icon:e.icon,children:Object(D.jsx)(d.b,{to:e.to,children:e.name})},e.key)}))]}),Object(D.jsx)(_.a,{orientation:"left",style:{color:"white"},children:a?Object(D.jsx)(X.a,{}):Object(D.jsxs)(P.b,{children:[Object(D.jsx)(ee.a,{})," General"]})}),Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"start"},children:[Object(D.jsx)(f.a,{type:"link",onClick:function(){window.open("/admin/api-docs/","_blank").focus()},children:a?Object(D.jsx)("b",{children:"API"}):"Api Documentation"}),Object(D.jsx)(f.a,{type:"link",onClick:function(){localStorage.clear(),window.location.replace("/admin-ui")},children:a?Object(D.jsx)(te.a,{}):"Logout"})]})]})})},ie=n(20),se=n(144),le=n(81),oe=n(297),ue=n(547),je=n(551),de=n(536),be=n(301),he=n(303);!function(e){e.string="string",e.number="number",e.boolean="boolean",e.ref="ref",e.date="date",e.array="array",e.object="object",e.enums="enums",e.file="file",e.json="json",e.richText="richText"}(ae||(ae={})),function(e){e.hasOne="hasone",e.hasMany="hasmany",e.none="none"}(ce||(ce={}));var Oe=n(528),fe=n(529),xe=n(530),pe=n(531),me=n(532);var ge=function(e){var t=e.type;return t=t.toLowerCase(),Object(D.jsx)(oe.a,{color:function(){switch(t){case ae.string:return"#f50";case ae.number:return"#FFC300";case ae.boolean:return"#52c41a";case ae.ref:return"#13c2c2";case ae.date:return"#1890ff";case ae.file:return"#2f54eb";case ae.json:return"#AF7AC5";case ae.richText.toLowerCase():return"#34495E";default:return"#8c8c8c"}}(),children:function(){switch(t){case ae.string:return"Ab";case ae.number:return"123";case ae.boolean:return Object(D.jsx)(Oe.a,{},t);case ae.ref:return Object(D.jsx)(fe.a,{},t);case ae.date:return Object(D.jsx)(xe.a,{},t);case ae.file:return Object(D.jsx)(pe.a,{},t);case ae.json:return"{ }";case ae.richText.toLowerCase():return Object(D.jsx)(me.a,{});default:return"NA"}}()})},ve=n(55),ye=n(543),we=n(160),Ce=n(300),ke=n(546),Se=n(143),Te=n(299),Fe=n(540).a.Text;function ze(e){var t=e.message,n=void 0===t?"This field is required":t;return Object(D.jsx)(Fe,{type:"danger",style:{fontSize:12},strong:!0,children:n})}var Ie=function(e){var t=e.collections,n=e.isModalVisible,a=e.setIsModalVisible,i=e.edit,s=e.selectedCollection,l=Object(c.useState)(s?s.name:""),u=Object(M.a)(l,2),j=u[0],d=u[1],b=Object(c.useState)(!0),h=Object(M.a)(b,2),O=h[0],x=h[1],p=Object(c.useState)(s?s.operations:{list:!0,create:!0,read:!0,update:!0,delete:!0,deleteAll:!0}),v=Object(M.a)(p,2),w=v[0],C=v[1],k=Object(c.useRef)(),T=Object(o.c)(),F=r.a.useCallback((function(e){return T(function(e){var t={type:y,collection:e};return function(){var n=Object(g.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z(e);case 2:a(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[T]),I=r.a.useCallback((function(e){return T(E(e))}),[T]),N=r.a.useCallback((function(e){return T(L(e))}),[T]),q=function(){if(0!==j.length){if(i){var e=Object(ie.a)(Object(ie.a)({},s),{},{name:j,show:O,operations:w});N(e),I(e)}else{if(t.find((function(e){return e.name===j})))return void S.b.error("Collection already exists");var n={id:Object(ke.a)(),name:Object(Te.a)(j),schema:{},fields:0,show:O,operations:w,publicMethods:{list:!1,create:!1,read:!1,update:!1,delete:!1,deleteAll:!1},x:300*Math.floor(t.length%4)+20,y:60*(Math.floor(t.length/4)+1)};F(n),I(n),d("")}a(!1)}};return Object(c.useEffect)((function(){k.current&&k.current.focus()}),[]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(f.a,{className:"button-blue",onClick:function(){a(!0)},children:i?"Edit":"Create New"}),Object(D.jsx)(ye.a,{title:Object(D.jsxs)("span",{children:[" ",Object(D.jsx)(Ce.a,{})," Create new collection"]}),visible:n,onOk:q,onCancel:function(){a(!1)},children:Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)(ue.a,{ref:k,placeholder:"Collection Name",value:j,onChange:function(e){var t=e.target.value;/[^a-zA-Z ]/.test(t)||d(t)},onKeyDown:function(e){"Enter"===e.key&&q()}}),0===j.length&&Object(D.jsx)(ze,{}),Object(Se.a)(j),Object(D.jsxs)(we.a,{onChange:function(){return x(!O)},value:O,checked:O,children:[" ",Object(D.jsx)("b",{children:"Show on data flow ?"})]}),Object(D.jsx)(oe.a,{color:"geekblue",children:"Allowed Operations"}),Object(D.jsx)("div",{children:Object.keys(w).map((function(e){return Object(D.jsxs)(we.a,{onChange:function(){return C(Object(ie.a)(Object(ie.a)({},w),{},Object(ve.a)({},e,!w[e])))},checked:w[e],value:w[e],children:[" ",Object(D.jsx)("b",{children:e})]})}))})]})})]})},Ne=n(193),qe=n(550);var Ee=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))};return Object(D.jsx)(D.Fragment,{children:"boolean"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%"},children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",onChange:function(e){return a("name",e.target.value)},defaultValue:t.name}),Object(D.jsx)("span",{children:"Default value"}),Object(D.jsx)(qe.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.default,onChange:function(e){return a("default",e)}}),Object(D.jsx)("span",{children:"Required"}),Object(D.jsx)(qe.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return a("required",e)}})]})})},Le=n(541),Ae={index:!1,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1};var Re=function(e){var t=e.state,n=e.setState,a=Object(c.useState)([]),r=Object(M.a)(a,2),i=r[0],s=r[1],l=function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))};return Object(c.useEffect)((function(){var e=Object.keys(t).filter((function(e){return Object.keys(Ae).includes(e)&&function(e){return function(t){return t[e]}}(e)(t)}));s(e)}),[t]),Object(D.jsx)(D.Fragment,{children:"number"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%"},children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",onChange:function(e){return l("name",e.target.value)}}),Object(D.jsx)("span",{children:"Default value"}),Object(D.jsx)(Le.a,{min:1,max:10,onChange:function(e){return l("default",e)},placeholder:"10",style:{width:"100%"}}),Object(D.jsx)("span",{children:"Settings"}),Object(D.jsx)(we.a.Group,{style:{width:"100%"},onChange:function(e){var t={index:!1,required:!1,unique:!1};n((function(n){return Object.keys(t).forEach((function(n){e.includes(n)&&(t[n]=!0)})),Object(ie.a)(Object(ie.a)({},n),t)})),s(e)},value:i,children:Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)(we.a,{value:"required",children:"Required"}),Object(D.jsx)(we.a,{value:"index",children:"Index"}),Object(D.jsx)(we.a,{value:"unique",children:"Unique"}),Object(D.jsx)("h4",{children:"Minimum Length"}),Object(D.jsx)(Le.a,{min:0,value:t.minLength||0,onChange:function(e){return l("minLength",e)}}),Object(D.jsx)("h4",{children:"Maximum Length"}),Object(D.jsx)(Le.a,{min:0,value:t.maxLength||0,onChange:function(e){return l("maxLength",e)}})]})})]})})};var De=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))},c=Object(o.d)((function(e){return e.collections}),o.b);return Object(D.jsx)(D.Fragment,{children:"ref"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return a("name",e.target.value)}}),Object(D.jsx)(ze,{}),Object(D.jsx)("span",{children:"Relationship"}),Object(D.jsxs)(Ne.a.Group,{value:t.relationship,onChange:function(e){return a("relationship",e.target.value)},children:[Object(D.jsx)(Ne.a.Button,{value:ce.hasMany,children:"Has Many"}),Object(D.jsx)(Ne.a.Button,{value:ce.hasOne,children:"Has One"})]}),Object(D.jsx)("span",{children:"Auto Populate"}),Object(D.jsxs)(Ne.a.Group,{onChange:function(e){return a("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(D.jsx)(Ne.a,{value:!0,children:"True"}),Object(D.jsx)(Ne.a,{value:!1,children:"False"})]}),Object(D.jsx)("span",{children:"Required"}),Object(D.jsx)(qe.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return a("required",e)}}),Object(D.jsx)("span",{children:"Ref"}),Object(D.jsx)(Ne.a.Group,{value:t.ref,onChange:function(e){return a("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:c.map((function(e,t){var n=e.name;return Object(D.jsx)(Ne.a.Button,{value:n,style:{textTransform:"capitalize"},children:n},t)}))})]})})},Ve=ue.a.TextArea,Me={index:!1,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1};var Be=function(e){var t=e.state,n=e.setState,a=Object(c.useState)([]),r=Object(M.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)(""),o=Object(M.a)(l,2),u=o[0],j=o[1],d=function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))};return Object(c.useEffect)((function(){var e=Object.keys(t).filter((function(e){return Object.keys(Me).includes(e)&&function(e){return function(t){return t[e]}}(e)(t)}));s(e),t.enum.length&&j(t.enum.join("\n"))}),[t]),Object(D.jsx)(D.Fragment,{children:"string"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",onChange:function(e){return d("name",e.target.value)},value:t.name}),Object(D.jsx)(ze,{}),Object(D.jsx)("span",{children:"Default value"}),Object(D.jsx)(ue.a,{onChange:function(e){return d("default",e.target.value)},value:t.default,placeholder:"Keep empty for not setting the value"}),Object(D.jsxs)("span",{children:["Enums"," ",Object(D.jsx)(oe.a,{color:"geekblue",children:u.length?u.trim().split("\n").length:0})," "]}),Object(D.jsx)(Ve,{showCount:!0,rows:10,style:{width:"100%",textTransform:"lowercase"},value:u,placeholder:"Keep empty for not setting the value",onChange:function(e){j(e.target.value.toLowerCase())},onKeyDown:function(e){"Enter"===e.key&&d("enum",u.trim().split("\n"))}}),Object(D.jsx)("span",{children:"Settings"}),Object(D.jsx)(we.a.Group,{style:{width:"100%",height:"100%"},onChange:function(e){n((function(t){return e.includes("maxLength")||(t.maxLength=0),e.includes("minLength")||(t.minLength=0),Object.keys(Me).forEach((function(t){["maxLength","minLength"].includes(t)||(Me[t]=e.includes(t))})),Object(ie.a)(Object(ie.a)({},t),Me)})),s(e)},value:i,children:Object(D.jsxs)(se.a,{children:[Object(D.jsxs)(le.a,{lg:12,className:"d-flex-col",children:[Object(D.jsx)(we.a,{value:"required",children:"Required"}),Object(D.jsx)(we.a,{value:"index",children:"Index"}),Object(D.jsx)(we.a,{value:"unique",children:"Unique"}),Object(D.jsx)(we.a,{value:"lowercase",disabled:i.includes("uppercase"),children:"Lowercase"}),Object(D.jsx)(we.a,{value:"uppercase",disabled:i.includes("lowercase"),children:"Uppercase"})]}),Object(D.jsxs)(le.a,{lg:12,className:"d-flex-col",children:[Object(D.jsx)(we.a,{value:"trim",children:"Trim"}),Object(D.jsx)("h4",{children:"Minimum Length"}),Object(D.jsx)(Le.a,{min:0,value:t.minLength||0,onChange:function(e){return d("minLength",e)}}),Object(D.jsx)("h4",{children:"Maximum Length"}),Object(D.jsx)(Le.a,{min:0,value:t.maxLength||0,onChange:function(e){return d("maxLength",e)}})]})]})})]})})},_e=n(533);var Pe=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))};return Object(D.jsx)(D.Fragment,{children:"date"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%"},children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",onChange:function(e){return a("name",e.target.value)}}),Object(D.jsx)("span",{children:"Default value"}),Object(D.jsx)(_e.a,{onChange:function(e){return a("default",e)}})]})})};var Ge=function(e){var t=e.state,n=e.setState,a=function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))};return Object(D.jsx)(D.Fragment,{children:"file"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%",overflow:"auto"},children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",value:t.name,onChange:function(e){return a("name",e.target.value)}}),Object(D.jsx)(ze,{}),Object(D.jsx)("span",{children:"Relationship"}),Object(D.jsxs)(Ne.a.Group,{value:t.relationship,onChange:function(e){return a("relationship",e.target.value)},children:[Object(D.jsx)(Ne.a.Button,{value:ce.hasMany,children:"Has Many"}),Object(D.jsx)(Ne.a.Button,{value:ce.hasOne,children:"Has One"})]}),Object(D.jsx)("span",{children:"Auto Populate"}),Object(D.jsxs)(Ne.a.Group,{onChange:function(e){return a("autopopulate",e.target.value)},value:t.autopopulate,children:[Object(D.jsx)(Ne.a,{value:!0,children:"True"}),Object(D.jsx)(Ne.a,{value:!1,children:"False"})]}),Object(D.jsx)("span",{children:"Required"}),Object(D.jsx)(qe.a,{checkedChildren:"true",unCheckedChildren:"false",defaultChecked:t.required,onChange:function(e){return a("required",e)}}),Object(D.jsx)("span",{children:"Ref"}),Object(D.jsx)(Ne.a.Group,{value:t.ref,onChange:function(e){return a("ref",e.target.value)},style:{height:"300px",overflow:"auto"},children:Object(D.jsx)(Ne.a.Button,{value:"file",style:{textTransform:"capitalize"},children:"File"})})]})})};var Ue=function(e){var t=e.state,n=e.setState;return Object(D.jsx)("div",{children:"json"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",onChange:function(e){return function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))}("name",e.target.value)}}),Object(D.jsx)(ze,{})]})})};var $e=function(e){var t=e.state,n=e.setState;return Object(D.jsx)("div",{children:"richText"===t.type&&Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)("span",{children:"Name for the type"}),Object(D.jsx)(ue.a,{placeholder:"Type Name",onChange:function(e){return function(e,t){var a={};a[e]=t,n((function(e){return Object(ie.a)(Object(ie.a)({},e),a)}))}("name",e.target.value)}}),Object(D.jsx)(ze,{})]})})};var He=function(e){var t=e.selectedCollection,n=e.editSchema,a=Object(c.useState)(!1),i=Object(M.a)(a,2),s=i[0],l=i[1],u=Object(c.useState)({name:"",type:ae.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,enum:[],ref:"none",relationship:ce.hasMany,autopopulate:!0}),j=Object(M.a)(u,2),d=j[0],b=j[1],h=Object(o.c)(),O=r.a.useCallback((function(e){return h(L(e))}),[h]),x=function(){l(!1)};Object(c.useEffect)((function(){s||b({name:"",type:ae.string,default:"",index:!1,maxLength:0,minLength:0,required:!1,trim:!1,unique:!1,uppercase:!1,lowercase:!1,ref:"none",relationship:ce.hasMany,enum:[],autopopulate:!0})}),[s]),Object(c.useEffect)((function(){n&&(b(n),l(!0))}),[n]);var p=Object(D.jsx)(f.a,{type:"primary",onClick:function(){var e=Object(ie.a)({},t.schema);if(n||!e[d.name]){e[d.name]=d;var a=Object(ie.a)(Object(ie.a)({},t),{},{schema:e,fields:Object.keys(e).length});O(a),x()}else S.b.error("Type already exist")},disabled:0===d.name.length,children:"Save"});return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(f.a,{type:"primary",onClick:function(){l(!0)},style:{width:"100%",height:50,textTransform:"uppercase",fontWeight:"bold"},children:"Add New Field"}),Object(D.jsxs)(ye.a,{title:Object(D.jsxs)(P.b,{children:[" ",Object(D.jsx)(Ce.a,{}),Object(D.jsxs)(Ne.a.Group,{onChange:function(e){b((function(t){return Object(ie.a)(Object(ie.a)({},t),{},{type:e.target.value})}))},value:d.type,children:[Object(D.jsx)(Ne.a.Button,{value:ae.string,children:"String"}),Object(D.jsx)(Ne.a.Button,{value:ae.boolean,children:"Boolean"}),Object(D.jsx)(Ne.a.Button,{value:ae.number,children:"Number"}),Object(D.jsx)(Ne.a.Button,{value:ae.ref,children:"Ref"}),Object(D.jsx)(Ne.a.Button,{value:ae.date,children:"Date"}),Object(D.jsx)(Ne.a.Button,{value:ae.file,children:"File"}),Object(D.jsx)(Ne.a.Button,{value:ae.json,children:"JSON"}),Object(D.jsx)(Ne.a.Button,{value:ae.richText,children:"Rich Text"})]})]}),visible:s,onOk:x,onCancel:function(){l(!1)},footer:p,width:800,children:[Object(D.jsx)(Be,{state:d,setState:b}),Object(D.jsx)(Ee,{state:d,setState:b}),Object(D.jsx)(Re,{state:d,setState:b}),Object(D.jsx)(De,{state:d,setState:b}),Object(D.jsx)(Pe,{state:d,setState:b}),Object(D.jsx)(Ge,{state:d,setState:b}),Object(D.jsx)(Ue,{state:d,setState:b}),Object(D.jsx)($e,{state:d,setState:b})]})]})},Je=n(113),Ke=ye.a.confirm;var Ye=function(e){var t=e.removeCollectionType,n=e.collection,a=e.key;return Ke({title:"Sure you want to delete type?",icon:Object(D.jsx)(Je.a,{}),content:null,onOk:function(){!function(){var e=n.schema;delete e[a],n.schema=e,n.fields=n.fields-1,t(n)}()},onCancel:function(){console.log("Cancel")}})},We=ye.a.confirm;var Ze=function(e){var t=e.collection,n=e.deleteCollectionAction;return We({title:"Sure you want to delete this collection?",icon:Object(D.jsx)(Je.a,{}),content:null,onOk:function(){n(t),S.b.success("Collection removed")},onCancel:function(){console.log("Cancel")}})};var Qe=function(){var e=Object(c.useState)(),t=Object(M.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),s=Object(M.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)(!1),d=Object(M.a)(j,2),b=d[0],O=d[1],x=Object(o.d)((function(e){return e.collections})),p=Object(c.useState)([]),v=Object(M.a)(p,2),y=v[0],C=v[1],k=Object(o.d)((function(e){return e.selectedCollection}),o.b),T=Object(o.c)(),F=r.a.useCallback((function(e){return T(E(e))}),[T]),z=r.a.useCallback((function(e){return T(L(e))}),[T]),N=r.a.useCallback((function(e){return T(L(e))}),[T]),q=r.a.useCallback((function(e){return T(function(e){var t={type:w,collection:e};return function(){var n=Object(g.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,I(e);case 2:a(t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(e))}),[T]);return Object(c.useEffect)((function(){!k&&x.length&&F(x[0]),C(x)}),[x]),Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(h.a,{style:{height:"100%",marginBottom:50},children:k&&Object(D.jsxs)(se.a,{children:[Object(D.jsxs)(le.a,{className:"gutter-row",xs:24,sm:24,md:8,lg:6,xl:6,children:[Object(D.jsx)(R.a,{title:"Collections",extra:[Object(D.jsxs)(oe.a,{color:"green",children:["Total ",x.length]}),Object(D.jsx)(Ie,{collections:x,isModalVisible:l,setIsModalVisible:u})]}),Object(D.jsx)("div",{style:{padding:10},children:Object(D.jsx)(ue.a,{size:"large",placeholder:"Search Collection",onChange:function(e){var t=[];e.target.value.length?(t=x.filter((function(t){return t.name.trim().toLowerCase().includes(e.target.value.toLowerCase())})),C(t)):C(x)}})}),Object(D.jsx)(je.b,{itemLayout:"horizontal",dataSource:y,className:"collection-list",renderItem:function(e,t){return Object(D.jsx)(je.b.Item,{children:Object(D.jsxs)(oe.a,{style:{textTransform:"capitalize",cursor:"pointer",height:55,width:"100%",display:"grid",placeItems:"left",fontSize:"20px",letterSpacing:1.3,padding:10},color:e.name===(null===k||void 0===k?void 0:k.name)?"blue":e.show?"default":"error",onClick:function(){F(e)},children:[e.name,Object(D.jsxs)("span",{style:{fontSize:12},children:[e.fields," fields",Object(D.jsx)("span",{style:{fontSize:12,marginLeft:10},children:e.show?null:"Hidden"})]})]},t)},t)}})]}),Object(D.jsxs)(le.a,{className:"gutter-row",xs:24,sm:24,md:16,lg:18,xl:18,children:[Object(D.jsx)(R.a,{title:Object(D.jsx)("span",{style:{textTransform:"capitalize"},children:k.name}),extra:k.show?[Object(D.jsxs)(P.b,{children:[Object(D.jsx)(Ie,{collections:x,isModalVisible:b,setIsModalVisible:O,edit:!0,selectedCollection:k}),Object(D.jsx)(f.a,{className:"button-green",onClick:function(){N(k),S.b.success("Collection Saved")},children:"Save"}),Object(D.jsx)(f.a,{className:"button-red",onClick:function(){Ze({deleteCollectionAction:q,collection:k})},children:"Delete"})]})]:[Object(D.jsx)(oe.a,{color:"geekblue",children:"Hidden"})]}),Object(D.jsx)(se.a,{children:Object(D.jsxs)(le.a,{span:24,children:[Object(D.jsx)("h5",{children:"Allowed Operations"}),Object.keys(k.operations).map((function(e){return Object(D.jsx)(oe.a,{color:k.operations[e]?"geekblue":"volcano",children:e})}))]})}),Object(D.jsx)(se.a,{children:Object(D.jsxs)(le.a,{span:24,style:{paddingTop:20},children:[Object(D.jsx)(de.a,{bordered:!1,style:{boxShadow:"rgb(227 233 243) 0px 2px 4px"},title:Object(D.jsx)("div",{style:{display:"flex",justifyContent:"space-between"},children:Object(D.jsxs)("h1",{children:["".concat(k.fields," fields")," "]})}),bodyStyle:{padding:0},children:Object.keys(k.schema).map((function(e,t){var n=k.schema[e],c=n.type;return Object(D.jsxs)(se.a,{gutter:0,style:{height:60,padding:15,borderBottom:"1px solid #f0f0f0"},align:"middle",children:[Object(D.jsx)(le.a,{span:6,children:Object(D.jsx)(ge,{type:c})}),Object(D.jsxs)(le.a,{span:6,children:[Object(D.jsx)("span",{style:{fontSize:15,color:"#141414",fontWeight:500},children:e})," "]}),Object(D.jsxs)(le.a,{span:6,children:[Object(D.jsx)("span",{style:{fontSize:15,color:"#141414",textTransform:"capitalize"},children:c})," "]}),Object(D.jsx)(le.a,{span:6,style:{display:"flex",justifyContent:"flex-end"},children:k.show&&Object(D.jsxs)(P.b,{size:25,children:[Object(D.jsx)(be.a,{style:{color:"#8c8c8c",fontSize:20},onClick:function(){return a(Object(ie.a)(Object(ie.a)({},n),{},{name:e}))}}),Object(D.jsx)(he.a,{style:{color:"#cf1322",fontSize:20},className:"pointer",onClick:function(){return Ye({removeCollectionType:z,collection:k,key:e})}})]})})]},t)}))}),Object(D.jsx)("br",{}),k.show&&Object(D.jsx)(He,{selectedCollection:k,editSchema:n})]})})]})]})})})},Xe=n(112),et=n(298),tt=n(565),nt=n(304);var at=function(e){var t=e.collection,n=Object.keys(t.schema).map((function(e,n){return{key:n,field:e,type:t.schema[e].type}})),a=Object(c.useState)(!0),r=Object(M.a)(a,2),i=r[0],s=r[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("h2",{style:{backgroundColor:"#1890ff",textTransform:"capitalize",padding:10,color:"white",letterSpacing:1.5,display:"flex",justifyContent:"space-between",margin:0},children:[t.name,Object(D.jsxs)("span",{style:{cursor:i?"zoom-out":"zoom-in"},onClick:function(){return s(!i)},children:[" ",i?Object(D.jsx)(nt.a,{}):Object(D.jsx)(tt.a,{})," "]})]}),i&&Object(D.jsx)("table",{style:{width:"100%",transition:"5s"},children:n.map((function(e){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{style:{paddingLeft:8,textAlign:"left",fontSize:16,letterSpacing:1.2},children:e.field}),Object(D.jsx)("td",{style:{paddingRight:8,textAlign:"right",fontSize:14,letterSpacing:1.2,color:"#8c8c8c"},children:e.type})]},e.key)}))})]})},ct=function(){var e=Object(o.d)((function(e){return e.collections})),t=Object(c.useState)([]),n=Object(M.a)(t,2),a=n[0],r=n[1],i=function(){var t=[];e.forEach((function(e,n){t.push({id:e.name,data:{label:Object(D.jsx)("div",{children:Object(D.jsx)(at,{collection:e})})},style:{padding:0,width:"300px",borderColor:"#40a9ff",borderRadius:0},position:{x:e.x,y:e.y}}),t.push.apply(t,Object(Xe.a)(function(e,t,n){var a=[];return Object.keys(e).forEach((function(c,r){e[c].type===ae.ref&&a.push({id:"e1-".concat(n,"-").concat(r,"-").concat(c),source:t,target:e[c].ref,type:"smoothstep",label:"".concat(t," ").concat(e[c].relationship," ").concat(e[c].ref),animated:!1,labelStyle:{textTransform:"lowercase",fontSize:20,letterSpacing:1.2,backgroundColor:"#ff9c6e"},style:{width:"100%",padding:20,borderRadius:5}})})),a}(e.schema,e.name,e.id)))})),r(t)};Object(c.useEffect)((function(){i()}),[e]);var s=function(){var t=Object(g.a)(m.a.mark((function t(n,a,c){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.find((function(e){return e.name===n}))){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.x=a,r.y=c,t.next=8,z(r);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n,a){return t.apply(this,arguments)}}(),l=localStorage.getItem("displayPosition")?JSON.parse(localStorage.getItem("displayPosition")):JSON.parse('{"x":100,"y":100,"zoom":1}');return Object(D.jsx)("div",{style:{width:"100%",height:"100vh",overflow:"auto"},children:Object(D.jsx)(et.a,{defaultPosition:[l.x,l.y],elements:a,minZoom:.4,defaultZoom:l.zoom,snapToGrid:!0,snapGrid:[15,15],onlyRenderVisibleElements:!0,onMove:function(e){localStorage.setItem("displayPosition",JSON.stringify(e))},onNodeDragStop:function(e,t){s(t.id,t.position.x,t.position.y)}})})};var rt=function(){var e=Object(b.g)(),t=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show}));return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(R.a,{title:"Available Collections",subTitle:"Select any collection to view data",ghost:!1}),Object(D.jsx)("div",{className:"grid-responsive",children:t.map((function(t){return Object(D.jsx)(oe.a,{style:{paddingTop:15,paddingBottom:15,textTransform:"capitalize",margin:5,letterSpacing:1.2,cursor:"pointer",alignContent:"center",paddingLeft:30,paddingRight:30,fontWeight:600,fontSize:20},color:"orange",onClick:function(){e.push("/data/".concat(t.name,"?action=list&page[number]=1&page[limit]=10"))},children:Object(D.jsx)("span",{children:t.name})})}))})]})},it=n(535),st=n(186),lt=n(538),ot=n(191),ut=n(566),jt=n(567),dt=n(188),bt=n.n(dt),ht=n(286),Ot=ye.a.confirm,ft=it.a.Dragger;var xt=function(e){var t=e.setCustomFiles,n=e.deleteButton,r=e.filterButton,i=e.selectedFiles,s=void 0===i?[]:i,l="file",o=Object(c.useState)([]),u=Object(M.a)(o,2),j=u[0],d=u[1],b=Object(c.useState)(s),h=Object(M.a)(b,2),O=h[0],x=h[1],p=Object(c.useState)(!0),v=Object(M.a)(p,2),y=v[0],w=v[1],C=Object(c.useState)(!1),k=Object(M.a)(C,2),T=k[0],F=k[1],z=Object(c.useState)({current:1,pageSize:10}),I=Object(M.a)(z,2),q=I[0],E=I[1];Object(c.useEffect)((function(){"function"===typeof t&&t(Object(Xe.a)(O))}),[O]);var L={multiple:!0,name:"manual",action:"/admin/file/manual",headers:{authorization:localStorage.getItem("token")},defaultFileList:[],onChange:function(e){var t=e.file.status;"done"===t?S.b.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&S.b.error("".concat(e.file.name," file upload failed.")),e.fileList=[]},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},A=function(){var e=Object(g.a)(m.a.mark((function e(t,n){var c,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,c={model:t,operations:a.list,data:{query:{pagination:n}}},e.next=5,N(c);case 5:r=e.sent,i=r.data,E(i.pagination),d(i.list),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:w(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(g.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,t={model:l,operations:a.deleteAll,data:{id:O}},e.next=5,N(t);case 5:S.b.success("Records Deleted"),x([]),A(l,q),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:w(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){A(l,q)}),[]),Object(D.jsx)(D.Fragment,{children:y?Object(D.jsx)("div",{style:{padding:20},children:Object(D.jsx)(st.a,{})}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(R.a,{style:{marginTop:2},ghost:!0,title:Object(D.jsxs)(P.b,{children:[(null===q||void 0===q?void 0:q.total)>0&&Object(D.jsxs)(oe.a,{color:"green",children:["Total ",q.total]}),Object(D.jsxs)(oe.a,{color:"blue",children:["Selected ",O.length]})]}),extra:[O.length&&n?Object(D.jsxs)(f.a,{onClick:function(){return Ot({title:"Sure you want to delete selected records?",icon:Object(D.jsx)(Je.a,{}),content:null,onOk:function(){V()},onCancel:function(){console.log("Cancel")}})},children:[Object(D.jsx)(he.a,{}),"Delete"]}):null,r&&Object(D.jsxs)(f.a,{children:[Object(D.jsx)(ut.a,{}),"Filter"]},"2"),Object(D.jsxs)(f.a,{type:"primary",onClick:function(){F(!0)},children:[Object(D.jsx)(Ce.a,{}),"Upload"]},"1")]}),Object(D.jsx)("div",{className:"grid-responsive",children:j.map((function(e){return Object(D.jsxs)("div",{className:"on-hover",style:{border:O.includes(e._id)?"1px solid #40a9ff":"none",backgroundColor:"white"},children:[Object(D.jsx)(we.a,{style:{padding:10,position:"absolute",zIndex:99},checked:O.includes(e._id),onChange:function(){x((function(t){var n=Object(Xe.a)(t);return n.includes(e._id)?n=n.filter((function(t){return t!==e._id})):n.push(e._id),n}))}}),Object(D.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(D.jsx)(lt.a,{preview:!1,width:150,height:150,src:"/admin/file/get/"+e.filename,fallback:"/img/file.svg"})}),Object(D.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:10},children:[Object(D.jsx)("b",{children:e.originalname}),Object(D.jsxs)("span",{style:{color:"GrayText",display:"flex",justifyContent:"space-between"},children:[bt()(e.size)," ",e.mimetype]}),Object(D.jsx)("div",{children:Object(D.jsx)(oe.a,{color:"orange",children:e.fieldname})})]}),Object(D.jsx)(f.a,{style:{float:"right",margin:5},type:"link",onClick:function(){window.open(ht.proxy+"/admin/file/get/"+e.filename).focus()},children:"Open"})]},e._id)}))}),Object(D.jsx)(ot.a,{style:{textAlign:"right",margin:10},current:q.current,pageSize:q.pageSize,total:q.total,onChange:function(e,t){var n={current:e,pageSize:t,total:q.total};A(l,n)}}),Object(D.jsx)(ye.a,{title:"Upload File",visible:T,onOk:function(){A(l,q),F(!1)},onCancel:function(){return F(!1)},destroyOnClose:!0,children:Object(D.jsxs)(ft,Object(ie.a)(Object(ie.a)({},L),{},{className:"upload-list-inline",children:[Object(D.jsx)("p",{className:"ant-upload-drag-icon",children:Object(D.jsx)(jt.a,{})}),Object(D.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),Object(D.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))})]})})};var pt=function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(R.a,{title:"File Management",ghost:!1}),Object(D.jsx)(xt,{deleteButton:!0,selectedFiles:[]})]})};var mt=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.collections})).filter((function(e){return e.show})),n=r.a.useCallback((function(t){return e(L(t))}),[e]),a=function(e){return Object.keys(e.publicMethods||{}).map((function(e){return{label:e,value:"".concat(e)}}))},c=function(e){return Object.keys(e.publicMethods||{}).filter((function(t){return e.publicMethods[t]})).map((function(e){return"".concat(e)}))};return Object(D.jsxs)("div",{children:[Object(D.jsx)(R.a,{title:"Auth Management",subTitle:"Public routes available",ghost:!1}),Object(D.jsx)(se.a,{gutter:{xs:8,sm:16,md:24,lg:32},children:t.map((function(e){return Object(D.jsxs)(le.a,{className:"gutter-row",span:12,children:[Object(D.jsx)(R.a,{title:Object(D.jsx)(oe.a,{children:e.name}),style:{textTransform:"capitalize"}}),Object(D.jsx)(R.a,{children:Object(D.jsx)(we.a.Group,{options:a(e),defaultValue:c(e),onChange:function(t){return function(e,t){S.b.loading({content:"Saving...",key:"updatable"});var a={list:!1,create:!1,read:!1,update:!1,delete:!1,deleteAll:!1};t.forEach((function(e){a[e]=!0})),e.publicMethods=a,n(e)}(e,t)}})})]})}))}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{})]})},gt=n(539),vt=n(568);var yt=function(){var e=Object(c.useState)({collection:"",method:""}),t=Object(M.a)(e,2),n=t[0],a=t[1],r=Object(o.d)((function(e){return e.collections})).filter((function(e){return e.show})).map((function(e){return{title:e.name,key:e.name,icon:Object(D.jsx)(vt.a,{}),children:[{title:"list",key:"".concat(e.name,"-list"),icon:Object(D.jsx)(vt.a,{})},{title:"create",key:"".concat(e.name,"-create"),icon:Object(D.jsx)(vt.a,{})},{title:"read",key:"".concat(e.name,"-read"),icon:Object(D.jsx)(vt.a,{})},{title:"update",key:"".concat(e.name,"-update"),icon:Object(D.jsx)(vt.a,{})},{title:"delete",key:"".concat(e.name,"-delete"),icon:Object(D.jsx)(vt.a,{})},{title:"deleteAll",key:"".concat(e.name,"-deleteAll"),icon:Object(D.jsx)(vt.a,{})}].filter((function(t){return e.operations[t.title]}))}})).filter((function(e){return e.children.length}));return Object(c.useEffect)((function(){r.length&&a({collection:r[0].title,method:r[0].children[0].title})}),[]),Object(D.jsxs)("div",{children:[Object(D.jsx)(R.a,{title:"Api Documentation",subTitle:"Powered by swagger.io",ghost:!1,extra:[Object(D.jsx)(f.a,{className:"button-blue",onClick:function(){window.open("http://localhost:3002/admin/api-docs/","_blank").focus()},children:"Open docs"})]}),Object(D.jsxs)(se.a,{children:[Object(D.jsx)(le.a,{lg:3,style:{height:"100vh"},children:Object(D.jsx)(gt.a,{showLine:!0,showIcon:!1,defaultExpandParent:!0,onSelect:function(e,t){var n=e[0].toString().split("-"),c=Object(M.a)(n,2),i=c[0],s=c[1];a(s?{collection:i,method:s}:{collection:i,method:r.find((function(e){return e.title===i})).children[0].title})},treeData:r,style:{backgroundColor:"transparent",padding:20,height:"100vh"}})}),Object(D.jsxs)(le.a,{lg:21,style:{height:"100vh"},children:[Object(D.jsx)(R.a,{title:Object(D.jsx)("span",{style:{textTransform:"capitalize"},children:null===n||void 0===n?void 0:n.collection}),subTitle:"".concat(n.method)}),Object(D.jsx)(se.a,{})]})]})]})},wt=n(569),Ct=n(302);var kt=function(){var e=Object(c.useState)(""),t=Object(M.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(M.a)(r,2),s=i[0],l=i[1];return Object(D.jsxs)("div",{style:{display:"flex",height:"100vh",flexDirection:"column",paddingTop:200,alignItems:"center"},children:[Object(D.jsx)("img",{src:"/img/blue.svg",alt:"",width:200}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{style:{height:120,width:300,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)(ue.a,{placeholder:"Email",onChange:function(e){a(e.target.value)}}),Object(D.jsx)(ue.a.Password,{placeholder:"Password",iconRender:function(e){return e?Object(D.jsx)(wt.a,{}):Object(D.jsx)(Ct.a,{})},onChange:function(e){l(e.target.value)}}),Object(D.jsx)(f.a,{type:"primary",onClick:Object(g.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c={email:n,password:s},F.a.post("/auth/login",c);case 2:if(t=e.sent,a=t.data,"admin"===t.headers.role){e.next=10;break}return S.b.error("User not allowed"),e.abrupt("return");case 10:a.status?(localStorage.setItem("token",a.token),S.b.success(a.message),setTimeout((function(){window.location.replace("/admin-ui")}),1e3)):S.b.error(a.message);case 11:case"end":return e.stop()}var c}),e)}))),children:"Login"}),Object(D.jsx)(d.b,{to:"/register",style:{marginTop:10,padding:5,textAlign:"center"},children:"Register"})]})})]})};var St=function(){var e=Object(c.useState)(""),t=Object(M.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(M.a)(r,2),s=i[0],l=i[1];return Object(D.jsxs)("div",{style:{display:"flex",height:"100vh",flexDirection:"column",paddingTop:200,alignItems:"center"},children:[Object(D.jsx)("img",{src:"/img/black-logo.png",alt:"",width:300}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{style:{height:120,width:300,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)(ue.a,{placeholder:"Email",onChange:function(e){a(e.target.value)}}),Object(D.jsx)(ue.a.Password,{placeholder:"Password",iconRender:function(e){return e?Object(D.jsx)(wt.a,{}):Object(D.jsx)(Ct.a,{})},onChange:function(e){l(e.target.value)}}),Object(D.jsx)(f.a,{type:"primary",onClick:Object(g.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c={email:n,password:s},F.a.post("/auth/admin/register",c).then((function(e){var t=e.data;return t.status?(localStorage.setItem("token",t.token),e):e}));case 2:t=e.sent,(a=t.data).status?(S.b.success(a.message),setTimeout((function(){window.location.replace("/admin-ui")}),1e3)):S.b.error(a.message);case 5:case"end":return e.stop()}var c}),e)}))),children:"Register"}),Object(D.jsx)(d.b,{to:"/login",style:{marginTop:10,padding:5,textAlign:"center"},children:"Login"})]})})]})},Tt=n(534),Ft=n(548),zt=n(295),It=n(189),Nt=n(63),qt=n.n(Nt),Et=n(159),Lt=n(537),At=n(544);var Rt=function(e){var t=e.schemaValue,n=e.form,a=e.selectedRecord,r=e.action,i=Object(c.useState)([]),s=Object(M.a)(i,2),l=s[0],o=s[1];Object(c.useEffect)((function(){n.setFieldsValue(Object(ve.a)({},t.name,l))}),[l]);var u="update"===r&&a[t.name]?a[t.name].map((function(e){return e._id})):[];return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)("div",{children:Object(D.jsx)(xt,{setCustomFiles:o,selectedFiles:u})})})})},Dt=n(133),Vt=n(132),Mt=n.n(Vt);var Bt=function(e){var t=e.schemaValue,n=e.form,a=e.action,r=e.selectedRecord,i=Object(c.useState)("update"===a&&r[t.name]?r[t.name]:{}),s=Object(M.a)(i,2),l=s[0],o=s[1];return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)("div",{style:{border:"1px solid #161f59",borderRadius:1},children:Object(D.jsx)(Dt.a,{theme:"dark_mitsuketa_tribute",locale:Mt.a,placeholder:Object(ie.a)({},l),onChange:function(e){n.setFieldsValue(Object(ve.a)({},t.name,Object(ie.a)({},e.jsObject))),o(e.jsObject)},height:"550px",width:"100%"})})})},_t=n(287),Pt=n(288),Gt=n.n(Pt);var Ut=function(e){var t=e.schemaValue,n=e.form,a=e.action,r=e.selectedRecord,i=Object(c.useState)("update"===a&&r[t.name]?r[t.name]:"<p>Start Editing</p>"),s=Object(M.a)(i,2),l=s[0],o=s[1];return Object(D.jsx)("div",{style:{marginTop:10,marginBottom:10},children:Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)(_t.CKEditor,{editor:Gt.a,data:l,config:{ckfinder:{uploadUrl:"/admin/file/upload",options:{resourceType:"Images"}}},onError:function(e){console.log(e)},onReady:function(e){},onChange:function(e,a){var c=a.getData();n.setFieldsValue(Object(ve.a)({},t.name,c)),o(c)},onBlur:function(e,t){},onFocus:function(e,t){}})})})},$t=Et.a.Option,Ht=ue.a.TextArea;var Jt=function(e){var t=e.collectionName,n=e.handleOk,c=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})).find((function(e){return e.name===t})),r=c.schema,i=Lt.a.useForm(),s=Object(M.a)(i,1)[0],l=function(){var e=Object(g.a)(m.a.mark((function e(t){var r,i,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={model:(null===c||void 0===c?void 0:c.name)||"",operations:a.create,data:{body:t}},e.next=4,N(r);case 4:i=e.sent,l=i.data,S.b.success("Data Saved"),s.resetFields(),n(l._id),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),S.b.error(e.t0.response.data),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)(Lt.a,{name:"basic",onFinish:function(e){l(e)},onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",size:"large",form:s,children:[r&&Object.keys(r).map((function(e){var t=function(e){return function(t){return t[e]}}(e)(r);switch(t.type){case"string":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:t.enum.length?Object(D.jsx)(Et.a,{placeholder:"Select ".concat(t.name),children:Object(D.jsx)(D.Fragment,{children:t.enum.map((function(e){return Object(D.jsx)($t,{value:e,children:e})}))})}):Object(D.jsx)(Ht,{})});case"number":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)(Le.a,{style:{width:300}})});case"date":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)(_e.a,{})});case"boolean":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],initialValue:"false",children:Object(D.jsxs)(Et.a,{placeholder:"Select",children:[Object(D.jsx)($t,{value:"true",children:"True"}),Object(D.jsx)($t,{value:"false",children:"False"})]})});case"ref":return Object(D.jsx)(Yt,{action:"create",selectedRecord:{},schemaValue:t});case"file":return Object(D.jsx)(Rt,{schemaValue:t,form:s,selectedRecord:{},action:"create"});case"json":return Object(D.jsx)(Bt,{action:"create",selectedRecord:{},schemaValue:t,form:s});case"richText":return Object(D.jsx)(Ut,{action:"create",selectedRecord:{},schemaValue:t,form:s});default:return null}})),Object(D.jsx)(Lt.a.Item,{children:Object(D.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Save"})})]})},Kt=Et.a.Option;var Yt=function(e){var t=e.schemaValue,n=e.action,r=e.selectedRecord,i=Object(c.useState)([]),s=Object(M.a)(i,2),l=s[0],o=s[1],u=Object(c.useState)(""),j=Object(M.a)(u,2),d=j[0],b=j[1],h=Object(c.useState)([]),O=Object(M.a)(h,2),x=O[0],p=O[1],v=Object(c.useState)([]),y=Object(M.a)(v,2),w=y[0],C=y[1],k=Object(c.useState)(!1),S=Object(M.a)(k,2),T=S[0],F=S[1],z=function(){var e=Object(g.a)(m.a.mark((function e(n){var c,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={model:t.ref,operations:a.ref,data:{query:{search:d}}},e.next=4,N(c);case 4:r=e.sent,i=r.data,o(i.list),p(i.searchValues),n&&C((function(e){return"hasmany"===t.relationship?[].concat(Object(Xe.a)(e),[n]):n})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),I=l.map((function(e){return Object(D.jsx)(Kt,{value:e._id,children:x.map((function(t){var n;return(null===(n=e[t])||void 0===n?void 0:n.length)?"".concat(e[t]):e._id}))})}));return Object(c.useEffect)((function(){z()}),[d]),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:Object(D.jsxs)(P.b,{children:[t.name,Object(D.jsx)(f.a,{size:"small",type:"primary",onClick:function(){F(!0)},children:"Add"})]})}),name:t.name,rules:[{required:t.required}],initialValue:"update"===n&&r[t.name]?Array.isArray(r[t.name])?r[t.name].map((function(e){return e._id||e})):[r[t.name]._id]:w,children:Object(D.jsx)(Et.a,{showSearch:!0,value:w,placeholder:"Search anything in ".concat(t.name),defaultActiveFirstOption:!0,showArrow:!1,filterOption:!1,onSearch:function(e){return b(e)},onChange:function(e){C(e)},notFoundContent:Object(D.jsx)("span",{children:"Not found"}),mode:"hasmany"===t.relationship?"multiple":void 0,children:I.length>0&&I})}),Object(D.jsx)(At.a,{title:"Create Data - "+t.name,visible:T,width:600,style:{padding:0},onClose:function(){F(!1)},children:T&&Object(D.jsx)(Jt,{collectionName:t.ref,handleOk:function(e){z(e),F(!1)}})})]})},Wt=Et.a.Option,Zt=ue.a.TextArea;var Qt=function(){var e=Object(b.g)(),t=Object(b.i)().collection,n=qt.a.parse(e.location.search),c=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})).find((function(e){return e.name===t})),r=c.schema,i=Lt.a.useForm(),s=Object(M.a)(i,1)[0],l=function(){var e=Object(g.a)(m.a.mark((function e(t){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={model:(null===c||void 0===c?void 0:c.name)||"",operations:a.create,data:{body:t,id:n.id}},e.next=4,N(r);case 4:S.b.success("Data Saved"),window.history.back(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),S.b.error(e.t0.response.data),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{children:[Object(D.jsx)(R.a,{onBack:function(){return window.history.back()},title:"Create New"}),Object(D.jsx)(de.a,{style:{marginLeft:10,marginRight:10},title:Object(D.jsx)("span",{style:{letterSpacing:1.2,textTransform:"capitalize"},children:null===c||void 0===c?void 0:c.name}),children:Object(D.jsxs)(Lt.a,{name:"basic",onFinish:function(e){l(e)},onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",size:"large",form:s,children:[r&&Object.keys(r).map((function(e){var t=function(e){return function(t){return t[e]}}(e)(r);switch(t.type){case"string":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:t.enum.length?Object(D.jsx)(Et.a,{placeholder:"Select ".concat(t.name),children:Object(D.jsx)(D.Fragment,{children:t.enum.map((function(e){return Object(D.jsx)(Wt,{value:e,children:e})}))})}):Object(D.jsx)(Zt,{})});case"number":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)(Le.a,{style:{width:300}})});case"date":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],children:Object(D.jsx)(_e.a,{})});case"boolean":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:t.name}),name:t.name,rules:[{required:t.required}],initialValue:"false",children:Object(D.jsxs)(Et.a,{placeholder:"Select",children:[Object(D.jsx)(Wt,{value:"true",children:"True"}),Object(D.jsx)(Wt,{value:"false",children:"False"})]})});case"ref":return Object(D.jsx)(Yt,{action:"create",selectedRecord:{},schemaValue:t});case"file":return Object(D.jsx)(Rt,{schemaValue:t,form:s,selectedRecord:{},action:"create"});case"json":return Object(D.jsx)(Bt,{action:"create",selectedRecord:{},schemaValue:t,form:s});case"richText":return Object(D.jsx)(Ut,{action:"create",selectedRecord:{},schemaValue:t,form:s});default:return null}})),Object(D.jsx)(Lt.a.Item,{children:Object(D.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Save"})})]})})]})},Xt=n(49),en=n.n(Xt);var tn=function e(t){return t=t.data,Object(D.jsx)("div",{style:{borderLeft:"6px solid #1890ff",border:"1px dotted #1890ff",padding:10,margin:2,width:"100%"},children:"string"===typeof t?t:Object.keys(t).map((function(n){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(P.b,{direction:"vertical",children:[Object(D.jsx)(en.a,{style:{textTransform:"capitalize"},type:"secondary",children:n}),Object(D.jsx)("p",{children:"object"===typeof t[n]?Object(D.jsx)(e,{data:t[n]}):t[n]})]}),Object(D.jsx)("br",{})]})}))})},nn=function(){var e=Object(b.g)(),t=Object(c.useState)(),n=Object(M.a)(t,2),r=n[0],i=n[1],s=Object(b.i)().collection,l=qt.a.parse(e.location.search),u=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})).find((function(e){return e.name===s})),j=function(){var e=Object(g.a)(m.a.mark((function e(){var t,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={model:s,operations:a.read,data:{id:l.id}},e.next=4,N(t);case 4:n=e.sent,c=n.data,i(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){!r&&l.id&&j()}),[l]),Object(D.jsx)("div",{style:{marginBottom:60},children:r&&Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(R.a,{onBack:function(){return window.history.back()},title:u.name,style:{textTransform:"capitalize"},ghost:!1}),Object(D.jsx)(de.a,{style:{margin:10},children:Object(D.jsx)("div",{children:Object.keys(r).map((function(e){return console.log(r[e]),"key"!==e&&Object(D.jsxs)("div",{children:[Object(D.jsxs)(P.b,{direction:"vertical",style:{width:"100%"},children:[Object(D.jsx)(en.a,{style:{textTransform:"capitalize"},type:"secondary",children:e}),Object(D.jsx)("p",{children:Array.isArray(r[e])?r[e].map((function(e){return Object(D.jsx)(tn,{data:e})})):"object"===typeof r[e]?Object(D.jsx)(tn,{data:r[e]}):r[e].toString()})]}),Object(D.jsx)("br",{})]})}))})})]})})},an=n(570),cn=n(142),rn=n(571),sn=n(69),ln=n.n(sn),on=Et.a.Option,un=ue.a.TextArea;var jn=function(){var e=Object(b.g)(),t=Object(c.useState)(),n=Object(M.a)(t,2),r=n[0],i=n[1],s=Object(b.i)().collection,l=qt.a.parse(e.location.search),u=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})).find((function(e){return e.name===s})),j=Lt.a.useForm(),d=Object(M.a)(j,1)[0],h=function(){var e=Object(g.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={model:(null===u||void 0===u?void 0:u.name)||"",operations:a.update,data:{body:t,id:l.id}},e.next=4,N(n);case 4:S.b.success("Data Saved"),window.history.back(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),S.b.error(e.t0.response.data),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(g.a)(m.a.mark((function e(){var t,n,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={model:s,operations:a.read,data:{id:l.id}},e.next=4,N(t);case 4:n=e.sent,c=n.data,i(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){!r&&l.id&&O()}),[l]),Object(D.jsx)(D.Fragment,{children:r&&Object(D.jsxs)("div",{children:[Object(D.jsx)(R.a,{onBack:function(){return window.history.back()},title:"Edit"}),Object(D.jsx)(de.a,{style:{marginLeft:10,marginRight:10},title:Object(D.jsx)("span",{style:{letterSpacing:1.2,textTransform:"capitalize"},children:null===u||void 0===u?void 0:u.name}),children:Object(D.jsxs)(Lt.a,{name:"basic",onFinish:function(e){h(e)},onFinishFailed:function(e){console.log("Failed:",e)},layout:"vertical",size:"large",form:d,children:[u.schema&&Object.keys(u.schema).map((function(e){var t,n=function(e){return function(t){return t[e]}}(e)(u.schema);switch(n.type){case"string":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required,enum:["male","female"]}],initialValue:r[n.name],children:n.enum.length?Object(D.jsx)(Et.a,{placeholder:"Select ".concat(n.name),children:Object(D.jsx)(D.Fragment,{children:n.enum.map((function(e){return Object(D.jsx)(on,{value:e,children:e})}))})}):Object(D.jsx)(un,{})});case"number":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:r[n.name],children:Object(D.jsx)(Le.a,{style:{width:300}})});case"date":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:ln()(r[n.name]),children:Object(D.jsx)(_e.a,{})});case"boolean":return Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,rules:[{required:n.required}],initialValue:null===(t=r[n.name])||void 0===t?void 0:t.toString(),children:Object(D.jsxs)(Et.a,{placeholder:"Select",children:[Object(D.jsx)(on,{value:"true",children:"True"}),Object(D.jsx)(on,{value:"false",children:"False"})]})});case"ref":return Object(D.jsx)(Yt,{action:"update",selectedRecord:r,schemaValue:n});case"file":return Object(D.jsx)(Rt,{schemaValue:n,form:d,selectedRecord:r,action:"update"});case"json":return Object(D.jsx)(Bt,{action:"update",selectedRecord:r,schemaValue:n,form:d});case"richText":return Object(D.jsx)(Ut,{action:"update",selectedRecord:r,schemaValue:n,form:d});default:return null}})),Object(D.jsx)(Lt.a.Item,{children:Object(D.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Update"})})]})})]})})},dn=n(545),bn=Et.a.Option;function hn(e){var t=e.selectedCollection,n=Object(b.i)().collection,a=Object(b.g)(),r=qt.a.parse(a.location.search),i=Object(c.useState)(!1),s=Object(M.a)(i,2),l=s[0],o=s[1],u=null===t||void 0===t?void 0:t.schema,j=function(e){e=decodeURI(qt.a.stringify(e)),a.replace("/data/".concat(n,"?").concat(e))};return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(dn.a,{count:Object.keys(r).length-3,children:Object(D.jsxs)(f.a,{onClick:function(){o(!l)},children:["Filter ",Object(D.jsx)(ut.a,{})]})}),Object(D.jsx)(At.a,{title:"Filters",visible:l&&u,width:400,style:{padding:0},onClose:function(){return o(!1)},children:Object(D.jsx)(se.a,{children:Object(D.jsx)(le.a,{span:24,children:Object(D.jsxs)(Lt.a,{name:"basic",onFinish:function(e){var t=qt.a.parse(a.location.search);Object.keys(e).forEach((function(n){e[n]&&e[n].length>0&&(t["filter[".concat(n,"][$regex]")]=".*".concat(e[n],".*"))})),j(t)},onFinishFailed:function(){},layout:"vertical",size:"large",style:{overflowY:"auto",height:"100vh"},children:[u&&Object.keys(u).map((function(e){var t,n=function(e){return function(t){return t[e]}}(e)(u);switch(n.type){case"string":return t=r["filter[".concat(n.name,"][$regex]")]?r["filter[".concat(n.name,"][$regex]")].replaceAll(".*",""):"",Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,initialValue:t,children:n.enum.length?Object(D.jsx)(Et.a,{placeholder:"Select ".concat(n.name),children:Object(D.jsx)(D.Fragment,{children:n.enum.map((function(e){return Object(D.jsx)(bn,{value:e,children:e})}))})}):Object(D.jsx)(ue.a,{})});case"number":return t=r["filter[".concat(n.name,"][$regex]")]?r["filter[".concat(n.name,"][$regex]")].replaceAll(".*",""):"",Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,initialValue:t,children:Object(D.jsx)(Le.a,{style:{width:300}})});case"date":return t=r["filter[".concat(n.name,"][$regex]")]?r["filter[".concat(n.name,"][$regex]")].replaceAll(".*",""):null,Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,initialValue:t&&ln()(t),children:Object(D.jsx)(_e.a,{})});case"boolean":return t=r["filter[".concat(n.name,"][$regex]")]?r["filter[".concat(n.name,"][$regex]")].replaceAll(".*",""):null,Object(D.jsx)(Lt.a.Item,{label:Object(D.jsx)("span",{style:{textTransform:"capitalize",color:"#434343"},children:n.name}),name:n.name,initialValue:t,children:Object(D.jsxs)(Et.a,{placeholder:"Select",children:[Object(D.jsx)(bn,{value:"true",children:"True"}),Object(D.jsx)(bn,{value:"false",children:"False"})]})});default:return null}})),Object(D.jsx)(Lt.a.Item,{style:{position:"fixed",bottom:10,display:"flex",width:"100%"},children:Object(D.jsxs)(P.b,{children:[Object(D.jsx)(f.a,{type:"primary",htmlType:"submit",children:"Search"}),Object(D.jsx)(f.a,{onClick:function(){var e=qt.a.parse(a.location.search),t={action:e.action,"page[limit]":e["page[limit]"],"page[number]":e["page[number]"]};j(t),o(!1)},children:"Clear"})]})})]})})})})]})}var On=n(289),fn=Tt.a.Column,xn=ye.a.confirm;var pn=function(){var e=Object(b.i)().collection,t=Object(b.g)(),n=qt.a.parse(t.location.search),r=t.location.search,i=Object(c.useState)([]),s=Object(M.a)(i,2),l=s[0],u=s[1],j=Object(c.useState)([]),h=Object(M.a)(j,2),O=h[0],x=h[1],p=Object(On.a)(),v=Object(c.useState)(!0),y=Object(M.a)(v,2),w=y[0],C=y[1],k=Object(c.useState)([]),T=Object(M.a)(k,2),F=T[0],z=T[1],I=Object(c.useState)({current:1,pageSize:10}),q=Object(M.a)(I,2),E=q[0],L=q[1],A=Object(o.d)((function(e){return e.collections}),o.b).filter((function(e){return e.show})).find((function(t){return t.name===e})),V=function(){var e=Object(g.a)(m.a.mark((function e(t){var n,c,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,n={model:t,operations:a.list,data:{}},e.next=5,N(n,r);case 5:c=e.sent,i=c.data,L(i.pagination),u(i.list),x(i.column),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:C(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),_=function(){var t=Object(g.a)(m.a.mark((function t(n){var c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),t.prev=1,c={model:e,operations:a.delete,data:{id:n}},t.next=5,N(c);case 5:S.b.success("Record Deleted"),V(e),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:C(!1);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=Object(g.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),t.prev=1,n={model:e,operations:a.deleteAll,data:{id:F}},t.next=5,N(n);case 5:S.b.success("Records Deleted"),z([]),V(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:C(!1);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){A&&"list"===n.action&&(x([]),u([]),V(e))}),[e,A,window.location.href]);var U=l?l.map((function(e,t){return Object(ie.a)({key:t},e)})):[],$=O?O.map((function(e){var t=e.name,n=e.type,a=e.file,c=e.ref;return{title:t.toString(),dataIndex:t.toString(),key:t.toString(),type:n,file:a,ref:c}})):[];return $.push({title:"Action",key:"operation",fixed:"right",width:20,type:"operation"}),n.action&&"create"===n.action&&A?Object(D.jsx)(Qt,{}):n.action&&"update"===n.action&&A?Object(D.jsx)(jn,{}):n.action&&"show"===n.action&&A?Object(D.jsx)(nn,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(Ft.a,{}),Object(D.jsx)(R.a,{style:{marginTop:2},ghost:!1,onBack:function(){return window.history.back()},title:Object(D.jsxs)(P.b,{children:[Object(D.jsxs)("span",{style:{textTransform:"capitalize"},children:[e," "]}),(null===E||void 0===E?void 0:E.total)>0&&Object(D.jsx)(oe.a,{color:"geekblue",children:E.total}),Object(D.jsx)(zt.a,{children:p.map((function(e){var t=e.match,n=e.breadcrumb;return Object(D.jsx)(zt.a.Item,{children:Object(D.jsx)(d.b,{to:t.url,children:n})})}))})]}),extra:[F.length?Object(D.jsxs)(f.a,{onClick:function(){return xn({title:"Sure you want to delete selected records?",icon:Object(D.jsx)(Je.a,{}),content:null,onOk:function(){G()},onCancel:function(){console.log("Cancel")}})},children:[Object(D.jsx)(he.a,{}),"Delete"]}):null,Object(D.jsx)(hn,{selectedCollection:A}),Object(D.jsxs)(f.a,{type:"primary",onClick:function(){t.push("/data/".concat(e,"?action=create"))},children:[Object(D.jsx)(Ce.a,{}),"Create"]},"1")]}),Object(D.jsx)(Tt.a,{loading:w,style:{padding:10},scroll:{x:"100vw"},dataSource:U,size:"middle",rowKey:function(e){return e._id},rowSelection:{selectedRowKeys:F,onChange:function(e){z(e)}},pagination:E,onChange:function(e,n,a){var c=qt.a.parse(t.location.search);c["page[number]"]=e.current,c["page[limit]"]=e.pageSize,c=decodeURI(qt.a.stringify(c)),t.replace("/data/".concat(A.name,"?").concat(c))},children:$.map((function(n){switch(n.type){case"objectId":return Object(D.jsx)(fn,{title:Object(D.jsx)("span",{style:{textTransform:"capitalize"},children:"ID"}),dataIndex:n.dataIndex,fixed:"left",width:220},n.key);case"boolean":return Object(D.jsx)(fn,{title:Object(D.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,width:200,render:function(e,t,n){return void 0===e?null:Object(D.jsx)(D.Fragment,{children:e?Object(D.jsx)(oe.a,{color:"green",style:{textTransform:"capitalize"},children:e.toString()}):Object(D.jsx)(oe.a,{color:"red",style:{textTransform:"capitalize"},children:e.toString()})})}},n.key);case"date":return Object(D.jsx)(fn,{title:Object(D.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),dataIndex:n.dataIndex,width:200,render:function(e){return e?Object(D.jsx)("span",{children:ln()(e).format("MM/DD/YYYY hh:mm")}):null}},n.key);case"json":return Object(D.jsx)(fn,{title:Object(D.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-between"},children:[n.title,Object(D.jsx)(oe.a,{color:"magenta",children:"JSON"})]}),width:200,dataIndex:n.dataIndex,render:function(e){return e?Object(D.jsx)("span",{children:Object.keys(e).map((function(e){return Object(D.jsx)(oe.a,{children:e})}))}):null}},n.key);case"richText":return Object(D.jsx)(fn,{title:Object(D.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-between"},children:[n.title,Object(D.jsx)(oe.a,{color:"gold",children:"RichText"})]}),width:200,dataIndex:n.dataIndex,render:function(e){return Object(D.jsx)("div",{dangerouslySetInnerHTML:{__html:"".concat(e.toString().substring(0,40))}})}},n.key);case"operation":return Object(D.jsx)(fn,{title:Object(D.jsx)(P.b,{children:Object(D.jsx)(an.a,{})}),width:30,dataIndex:n.dataIndex,fixed:"right",render:function(n,a){return Object(D.jsx)(It.a,{overlay:Object(D.jsxs)(B.a,{children:[Object(D.jsx)(B.a.Item,{children:Object(D.jsx)(f.a,{style:{width:"100%"},className:"button-blue",icon:Object(D.jsx)(cn.a,{}),onClick:function(){t.push("/data/".concat(e,"?action=show&id=").concat(a._id))},children:"View"})}),Object(D.jsx)(B.a.Item,{children:Object(D.jsx)(f.a,{style:{width:"100%"},className:"button-green",icon:Object(D.jsx)(be.a,{}),onClick:function(){t.push("/data/".concat(e,"?action=update&id=").concat(a._id))},children:"Edit"})}),Object(D.jsx)(B.a.Item,{children:Object(D.jsx)(f.a,{icon:Object(D.jsx)(he.a,{}),className:"button-red",onClick:function(){return xn({title:"Sure you want to delete this record?",icon:Object(D.jsx)(Je.a,{}),content:null,onOk:function(){_(a._id)},onCancel:function(){console.log("Cancel")}})},children:"Delete"})})]}),placement:"bottomLeft",children:Object(D.jsx)(rn.a,{style:{cursor:"pointer",maxHeight:10}})})}},n.key);case"hasone":return Object(D.jsx)(fn,{title:Object(D.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-between"},children:[n.title,n.file&&Object(D.jsx)(oe.a,{color:"cyan",children:"File"})]}),dataIndex:n.dataIndex,width:200,render:function(e){return e&&Object(D.jsx)(P.b,{direction:"vertical",children:n.file?Object(D.jsxs)(P.b,{children:[Object(D.jsx)(lt.a,{preview:!1,width:100,height:100,src:"/admin/file/get/"+e.filename,fallback:"/img/file.svg"}),Object(D.jsxs)("span",{style:{color:"GrayText",display:"flex",justifyContent:"space-between",flexDirection:"column"},children:[Object(D.jsx)("b",{children:e.originalname}),bt()(e.size)," ",e.mimetype]})]}):"string"===typeof e?Object(D.jsx)(d.b,{to:"/data/".concat(n.ref?n.ref.toLowerCase():n.name,"?action=show&id=").concat(e),children:Object(D.jsxs)("span",{children:[e," "]})}):Object.values(e).map((function(e,t){return"string"!==typeof e?null:1===t?Object(D.jsxs)("span",{children:[e," "]}):null}))})}},n.key);case"hasmany":return Object(D.jsx)(fn,{title:Object(D.jsxs)("span",{style:{textTransform:"capitalize",display:"flex",justifyContent:"space-around"},children:[n.title,n.file&&Object(D.jsx)(oe.a,{color:"cyan",children:"Files"})]}),width:200,dataIndex:n.dataIndex,render:function(e){return Object(D.jsxs)("span",{children:[null===e||void 0===e?void 0:e.length," ",n.title]})}},n.key);default:return Object(D.jsx)(fn,{title:Object(D.jsx)("span",{style:{textTransform:"capitalize"},children:n.title}),width:200,dataIndex:n.dataIndex,render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(D.jsx)(D.Fragment,{children:A.schema[n.key].enum.length>0?Object(D.jsx)(oe.a,{color:"geekblue",style:{textTransform:"capitalize"},children:null===e||void 0===e?void 0:e.toString()}):Object(D.jsxs)("span",{children:[null===e||void 0===e?void 0:e.toString().slice(0,80),(null===e||void 0===e?void 0:e.toString().length)>80?"...":null]})})}},n.key)}}))})]})},mn=n(290),gn=n.n(mn);var vn=function(){var e="email",t=Object(c.useState)([]),n=Object(M.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)(!0),l=Object(M.a)(s,2),o=l[0],u=l[1],j=Object(c.useState)({name:"",config:"",subject:"",emailCode:"",html:"",cc:"",bcc:""}),b=Object(M.a)(j,2),h=b[0],O=b[1],x=Object(c.useState)(!1),p=Object(M.a)(x,2),v=p[0],y=p[1],w=Object(c.useState)({current:1,pageSize:10}),C=Object(M.a)(w,2),k=C[0],T=C[1],F=function(e,t){O(Object(ie.a)(Object(ie.a)({},h),{},Object(ve.a)({},e,t)))},z=function(){var t=Object(g.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={model:e,operations:a.create,data:{body:Object(ie.a)(Object(ie.a)({},h),{},{html:"<h1>Update your template here !</h1>"})}},t.next=4,N(n);case 4:S.b.success("Template Saved"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=Object(g.a)(m.a.mark((function e(t,n){var c,r,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,c={model:t,operations:a.list,data:{query:{pagination:n}}},e.next=5,N(c);case 5:r=e.sent,s=r.data,T(s.pagination),i(s.list),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:u(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){I(e,k)}),[]),Object(D.jsxs)("div",{children:[Object(D.jsx)(R.a,{title:"Emails",ghost:!1,extra:[Object(D.jsx)(f.a,{className:"button-green",onClick:function(){y(!0)},children:"Create"})]}),o?Object(D.jsx)(st.a,{style:{padding:20}}):Object(D.jsxs)("div",{children:[Object(D.jsx)(se.a,{children:r.map((function(e){return Object(D.jsx)(le.a,{span:6,style:{padding:20},children:Object(D.jsxs)(de.a,{size:"small",title:e.name,extra:Object(D.jsx)(d.b,{to:"/emails/".concat(e._id),children:"Preview"}),children:[Object(D.jsx)("code",{children:e.emailCode}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsx)(gn.a,{src:e.config,defaultValue:{},name:"config",collapsed:!0})]})})}))}),Object(D.jsxs)(ye.a,{title:"Create Email Template",visible:v,onOk:function(){z(),y(!1)},onCancel:function(){y(!1)},children:[Object(D.jsx)(en.a,{type:"secondary",children:"Name of the template"}),Object(D.jsx)(ue.a,{value:h.name,onChange:function(e){return F("name",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Code for the template that will be used to call using function"}),Object(D.jsx)(ue.a,{value:h.emailCode,onChange:function(e){return F("emailCode",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Email default subject"}),Object(D.jsx)(ue.a,{value:h.subject,onChange:function(e){return F("subject",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Email default cc"}),Object(D.jsx)(ue.a,{value:h.cc,onChange:function(e){return F("cc",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Email default bcc"}),Object(D.jsx)(ue.a,{value:h.bcc,onChange:function(e){return F("bcc",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Additional Config"}),Object(D.jsx)(Dt.a,{theme:"dark_mitsuketa_tribute",placeholder:h.config||{},locale:Mt.a,onChange:function(e){return F("config",e.jsObject)},height:"250px",width:"100%"})]})]})]})},yn=n(291),wn=n(292),Cn=n.n(wn),kn=n(225),Sn=(n(519),n(520),n(521),n(227));var Tn=function(e){var t=e.emailCode,n=Object(c.useState)(!1),a=Object(M.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(""),l=Object(M.a)(s,2),o=l[0],u=l[1],j=Object(c.useState)(""),d=Object(M.a)(j,2),b=d[0],h=d[1],O=function(){var e=Object(g.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t,o,b);case 3:n=e.sent,(a=n.data).status?(S.b.success(a.message),u(""),h(""),i(!1)):S.b.error(a.message),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),u(""),h(""),i(!1),S.b.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(f.a,{type:"primary",onClick:function(){i(!0)},children:"Send Email"}),Object(D.jsxs)(ye.a,{title:"Basic Modal",visible:r,onOk:O,onCancel:function(){i(!1)},children:[Object(D.jsx)(en.a,{type:"secondary",children:"to"}),Object(D.jsx)(ue.a,{onChange:function(e){return u(e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"from"}),Object(D.jsx)(ue.a,{onChange:function(e){return h(e.target.value)}})]})]})};var Fn=function(){var e="email",t=Object(c.useState)(!0),n=Object(M.a)(t,2),r=n[0],i=n[1],s=Object(c.useState)(),l=Object(M.a)(s,2),o=l[0],u=l[1],j=Object(c.useState)(""),d=Object(M.a)(j,2),h=d[0],x=d[1],p=Object(c.useState)(!1),v=Object(M.a)(p,2),y=v[0],w=v[1],C=Object(Sn.b)(),k=Object(b.i)(),T=function(){var t=Object(g.a)(m.a.mark((function t(){var n,c,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,n={model:e,operations:a.read,data:{id:k.id}},t.next=5,N(n);case 5:c=t.sent,r=c.data,u(r),i(!1),x(r.html),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=Object(g.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n={model:e,operations:a.update,data:{body:Object(ie.a)(Object(ie.a)({},o),{},{html:h}),id:k.id}},t.next=4,N(n);case 4:S.b.success("Template Saved"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),z=function(e,t){u(Object(ie.a)(Object(ie.a)({},o),{},Object(ve.a)({},e,t)))};return Object(c.useEffect)((function(){T()}),[]),Object(D.jsx)("div",{children:r?Object(D.jsx)(st.a,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(R.a,{onBack:function(){window.history.back()},title:o.name,subTitle:o.emailCode,ghost:!1,extra:[Object(D.jsx)(f.a,{className:"button-blue",onClick:function(){return w(!0)},children:"Edit"}),Object(D.jsx)(f.a,{className:"button-green",onClick:function(){return F()},children:"Save"}),Object(D.jsx)(Tn,{emailCode:o.emailCode})]}),Object(D.jsx)(se.a,{children:Object(D.jsx)(le.a,{span:24,style:{padding:5},children:Object(D.jsx)(O.a,{message:"You can edit your html right away here.",type:"info"})})}),Object(D.jsxs)(se.a,{children:[Object(D.jsx)(le.a,{span:12,style:{padding:10},children:Object(D.jsx)(Cn.a,{value:h,onValueChange:function(e){return x(e)},highlight:function(e){return Object(kn.highlight)(e,kn.languages.js)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12}})}),Object(D.jsx)(le.a,{span:12,style:{padding:10},children:Object(D.jsx)(Sn.a,{handle:C,children:Object(D.jsx)("div",{children:Object(yn.a)(h)})})})]}),Object(D.jsxs)(ye.a,{title:"Edit Email",visible:y,onOk:function(){F(),w(!1)},onCancel:function(){w(!1)},children:[Object(D.jsx)(en.a,{type:"secondary",children:"Name of the template"}),Object(D.jsx)(ue.a,{value:o.name,onChange:function(e){return z("name",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Code for the template that will be used to call using function"}),Object(D.jsx)(ue.a,{value:o.emailCode,onChange:function(e){return z("emailCode",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Email default subject"}),Object(D.jsx)(ue.a,{value:o.subject,onChange:function(e){return z("subject",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Email default cc"}),Object(D.jsx)(ue.a,{value:o.cc,onChange:function(e){return z("cc",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Email default bcc"}),Object(D.jsx)(ue.a,{value:o.bcc,onChange:function(e){return z("bcc",e.target.value)}}),Object(D.jsx)(en.a,{type:"secondary",children:"Additional Config"}),Object(D.jsx)(Dt.a,{theme:"dark_mitsuketa_tribute",placeholder:o.config||{},locale:Mt.a,onChange:function(e){return z("config",e.jsObject)},height:"250px",width:"100%"})]})]})})},zn=h.a.Content;function In(e){var t=e.error,n=e.resetErrorBoundary;return Object(D.jsx)(O.a,{message:"Something broke, please try again",description:t.message,type:"error",action:Object(D.jsx)(f.a,{onClick:n,size:"small",danger:!0,children:"Detail"})})}var Nn=function(){var e=Object(o.c)();return Object(c.useEffect)((function(){e(function(){var e=Object(g.a)(m.a.mark((function e(t){var n,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get("/admin/model/list");case 2:n=e.sent,a=n.data,c={type:v,collections:a,collection:a[0]||{}},t(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(D.jsxs)(h.a,{children:[Object(D.jsx)(re,{}),Object(D.jsxs)(h.a,{children:[Object(D.jsx)(V,{}),Object(D.jsx)(zn,{style:{overflow:"initial"},children:Object(D.jsxs)(b.d,{children:[Object(D.jsx)(b.b,{path:"/",exact:!0,component:ct}),Object(D.jsx)(b.b,{path:"/collections",exact:!0,component:Qe}),Object(D.jsx)(b.b,{path:"/data",exact:!0,component:rt}),Object(D.jsx)(b.b,{path:"/data/:collection",exact:!0,component:pn}),Object(D.jsx)(b.b,{path:"/files",exact:!0,component:pt}),Object(D.jsx)(b.b,{path:"/auth",exact:!0,component:mt}),Object(D.jsx)(b.b,{path:"/api-docs",exact:!0,component:yt}),Object(D.jsx)(b.b,{path:"/emails",exact:!0,component:vn}),Object(D.jsx)(b.b,{path:"/emails/:id",exact:!0,component:Fn})]})})]}),Object(D.jsx)("img",{style:{position:"fixed",bottom:10,right:10,opacity:.5},src:"/img/black.svg",alt:"",width:100})]})},qn=function(){var e=localStorage.getItem("token");return Object(D.jsx)(h.a,{className:"main",children:Object(D.jsx)(x.ErrorBoundary,{FallbackComponent:In,onReset:function(){},children:Object(D.jsx)(d.a,{basename:"/admin-ui",children:e?Nn():Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(b.b,{path:"/register",component:St}),Object(D.jsx)(b.b,{path:"/login",component:kt}),Object(D.jsx)(b.a,{path:"/",to:"/login"})]})})})})},En=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,572)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Ln={collections:[],selectedCollection:void 0},An=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(ie.a)(Object(ie.a)({},e),{},{collections:t.collections||[]});case y:return Object(ie.a)(Object(ie.a)({},e),{},{collections:e.collections.concat(t.collection).sort((function(e,t){return e.name.localeCompare(t.name)}))});case w:var n=e.collections.filter((function(e){return e.id!==t.collection.id})).sort((function(e,t){return e.name.localeCompare(t.name)}));return Object(ie.a)(Object(ie.a)({},e),{},{collections:n,selectedCollection:void 0});case C:var a=t.collection;return Object(ie.a)(Object(ie.a)({},e),{},{selectedCollection:a});case k:var c=t.collection;return e.collections=e.collections.map((function(e){return e.id===c.id?c:e})),e.selectedCollection=c,Object(ie.a)({},e)}return e},Rn=Object(l.createStore)(An,Object(j.composeWithDevTools)(Object(l.applyMiddleware)(u.a)));s.a.render(Object(D.jsx)(o.a,{store:Rn,children:Object(D.jsx)(qn,{})}),document.getElementById("root")),En()}},[[522,1,2]]]);
//# sourceMappingURL=main.b4fae647.chunk.js.map